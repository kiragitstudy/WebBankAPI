# üè¶ Bank API - –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –°–∏—Å—Ç–µ–º–∞

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π API —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–∞–º–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏-—Å–∏—Å—Ç–µ–º—ã)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#-—Å—Ü–µ–Ω–∞—Ä–∏–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [API Endpoints](#-api-endpoints)
- [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#-–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)

---

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å:

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞)
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (BCrypt)

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞–º–∏**
   - –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤ (—Ç–µ–∫—É—â–∏–π, —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π)
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–≤–æ–∏—Ö —Å—á–µ—Ç–æ–≤
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—á—ë—Ç–µ
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç (USD, EUR, RUB –∏ —Ç.–¥.)

3. **–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–µ–Ω—å–≥–∞–º–∏**
   - üí∞ **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç–∞** - –≤–Ω–µ—Å–µ–Ω–∏–µ –Ω–∞–ª–∏—á–Ω—ã—Ö (–±–µ–∑ –ª–∏–º–∏—Ç–æ–≤)
   - üí∏ **–°–Ω—è—Ç–∏–µ –Ω–∞–ª–∏—á–Ω—ã—Ö** - —Å–Ω—è—Ç–∏–µ —á–µ—Ä–µ–∑ –±–∞–Ω–∫–æ–º–∞—Ç (–ª–∏–º–∏—Ç 50,000/–¥–µ–Ω—å)
   - üßæ **–û–ø–ª–∞—Ç–∞ —É—Å–ª—É–≥** - –∫–æ–º–º—É–Ω–∞–ª–∫–∞, –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, –º–æ–±–∏–ª—å–Ω–∞—è —Å–≤—è–∑—å, –∫—Ä–µ–¥–∏—Ç—ã, –Ω–∞–ª–æ–≥–∏
   - üõí **–ü–æ–∫—É–ø–∫–∏ –∫–∞—Ä—Ç–æ–π** - –æ–ø–ª–∞—Ç–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö, —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö, –æ–Ω–ª–∞–π–Ω
   - üí≥ **–ü–µ—Ä–µ–≤–æ–¥—ã** - –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ —Å—á–µ—Ç–∞–º–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
   - üìä **–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - üìÑ **–í—ã–ø–∏—Å–∫–∞ –ø–æ —Å—á—ë—Ç—É** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –∑–∞ –ª—é–±–æ–π –ø–µ—Ä–∏–æ–¥

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç**
   - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS (Rate Limiting)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –ü–û

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é .NET (–Ω—É–∂–Ω–∞ 8.0+)
dotnet --version

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker
docker --version
docker-compose --version
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –∏ Redis –≤ Docker
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å
docker ps
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
- `bank_postgres` - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `bank_redis` - Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã EF Core (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
dotnet tool install --global dotnet-ef

# –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
dotnet ef migrations add InitialCreate

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é (—Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã)
dotnet ef database update
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ API

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã NuGet
dotnet restore

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
dotnet run
```

### –®–∞–≥ 5: –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É:
```
https://localhost:7001/swagger
```

–ó–¥–µ—Å—å –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –∏ —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ endpoints!

---

## üé¨ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–®–∞–≥ 1 - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "ivan@example.com",
  "password": "Secure123!@#",
  "fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phoneNumber": "+79991234567"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "expiresAt": "2024-12-21T12:00:00Z",
    "user": {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "email": "ivan@example.com",
      "fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
    }
  },
  "message": "Registration successful"
}
```

**–®–∞–≥ 2 - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω!**
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `token` –∏–∑ –æ—Ç–≤–µ—Ç–∞ - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

**–®–∞–≥ 3 - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ Swagger:**
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** –≤–≤–µ—Ä—Ö—É Swagger UI
2. –í–≤–µ–¥–∏—Ç–µ: `Bearer –í–ê–®_–¢–û–ö–ï–ù_–ó–î–ï–°–¨`
3. –ù–∞–∂–º–∏—Ç–µ "Authorize"

–¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á—ë—Ç–∞

**–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å—á—ë—Ç:**
```http
POST /api/accounts
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
Content-Type: application/json

{
  "type": 1,
  "currency": "USD"
}
```

**–¢–∏–ø—ã —Å—á–µ—Ç–æ–≤:**
- `1` - Checking (—Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç)
- `2` - Savings (—Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π)
- `3` - Investment (–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–π)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "acc-123e4567-e89b-12d3",
    "accountNumber": "ACC20241220123456",
    "balance": 0.00,
    "currency": "USD",
    "type": "Checking",
    "isActive": true
  },
  "message": "Account created successfully"
}
```

**–°–æ–∑–¥–∞–π—Ç–µ –µ—â—ë –æ–¥–∏–Ω —Å—á—ë—Ç** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏).

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å—á–µ—Ç–æ–≤

```http
GET /api/accounts
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": "acc-123...",
      "accountNumber": "ACC20241220123456",
      "balance": 1500.00,
      "currency": "USD",
      "type": "Checking"
    },
    {
      "id": "acc-456...",
      "accountNumber": "ACC20241220789012",
      "balance": 500.00,
      "currency": "USD",
      "type": "Savings"
    }
  ]
}
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

**–í–∞–∂–Ω–æ:** –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ "–ø–æ–ø–æ–ª–Ω–∏—Ç—å" —Å—á—ë—Ç. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
docker exec -it bank_postgres psql -U postgres -d bankdb

-- –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å —Å—á—ë—Ç–∞
UPDATE "Accounts" 
SET "Balance" = 1000.00 
WHERE "AccountNumber" = 'ACC20241220123456';

-- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
SELECT "AccountNumber", "Balance" FROM "Accounts";
```

**–¢–µ–ø–µ—Ä—å —Å–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥:**
```http
POST /api/transactions
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
Content-Type: application/json

{
  "fromAccountId": "ID_–°–ß–Å–¢–ê_–û–¢–ü–†–ê–í–ò–¢–ï–õ–Ø",
  "toAccountId": "ID_–°–ß–Å–¢–ê_–ü–û–õ–£–ß–ê–¢–ï–õ–Ø",
  "amount": 100.50,
  "description": "–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á—ë—Ç"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "txn-789...",
    "fromAccountId": "acc-123...",
    "toAccountId": "acc-456...",
    "amount": 100.50,
    "description": "–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á—ë—Ç",
    "status": "Completed",
    "createdAt": "2024-12-20T10:30:00Z",
    "completedAt": "2024-12-20T10:30:01Z"
  },
  "message": "Transaction completed successfully"
}
```

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤–∞–ª—é—Ç
- ‚úÖ –°–ø–∏—à–µ—Ç –¥–µ–Ω—å–≥–∏ —Å –æ–¥–Ω–æ–≥–æ —Å—á—ë—Ç–∞
- ‚úÖ –ó–∞—á–∏—Å–ª–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–π —Å—á—ë—Ç
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –∑–∞–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –ó–∞–ª–æ–≥–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –≤ audit log

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```http
GET /api/transactions/account/{accountId}?page=1&pageSize=10
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

**–ü—Ä–∏–º–µ—Ä:**
```
GET /api/transactions/account/acc-123e4567?page=1&pageSize=10
```

**–û—Ç–≤–µ—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π:**
```json
{
  "success": true,
  "data": {
    "items": [
      {
        "id": "txn-789...",
        "amount": 100.50,
        "description": "–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á—ë—Ç",
        "status": "Completed",
        "createdAt": "2024-12-20T10:30:00Z"
      }
    ],
    "totalCount": 15,
    "pageNumber": 1,
    "pageSize": 10,
    "totalPages": 2
  }
}
```

**–§–∏—á–∞:** –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –≤ Redis –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞!

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞

```http
GET /api/accounts/{accountId}
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "id": "acc-123...",
    "accountNumber": "ACC20241220123456",
    "balance": 899.50,
    "currency": "USD",
    "type": "Checking",
    "createdAt": "2024-12-20T09:00:00Z"
  }
}
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Clean Architecture - 4 —Å–ª–æ—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           API Layer                  ‚îÇ  ‚Üê HTTP Controllers
‚îÇ  (Controllers, Middleware)           ‚îÇ     Swagger UI
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       Application Layer              ‚îÇ  ‚Üê Business Logic
‚îÇ  (Services, DTOs, Interfaces)        ‚îÇ     Validation
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Infrastructure Layer             ‚îÇ  ‚Üê Database
‚îÇ  (EF Core, Redis, External APIs)     ‚îÇ     Caching
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Domain Layer                 ‚îÇ  ‚Üê Business Entities
‚îÇ  (Entities, Business Rules)          ‚îÇ     Pure C# Classes
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
BankAPI/
‚îú‚îÄ‚îÄ Domain/
‚îÇ   ‚îî‚îÄ‚îÄ Entities/              # –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ       ‚îú‚îÄ‚îÄ User.cs           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
‚îÇ       ‚îú‚îÄ‚îÄ Account.cs        # –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á—ë—Ç
‚îÇ       ‚îú‚îÄ‚îÄ Transaction.cs    # –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ AuditLog.cs       # –ê—É–¥–∏—Ç-–ª–æ–≥
‚îÇ
‚îú‚îÄ‚îÄ Application/
‚îÇ   ‚îú‚îÄ‚îÄ Services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthService.cs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountService.cs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionService.cs
‚îÇ   ‚îî‚îÄ‚îÄ DTOs/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ
‚îú‚îÄ‚îÄ Infrastructure/
‚îÇ   ‚îî‚îÄ‚îÄ Data/
‚îÇ       ‚îî‚îÄ‚îÄ BankDbContext.cs  # –ö–æ–Ω—Ç–µ–∫—Å—Ç –ë–î
‚îÇ
‚îî‚îÄ‚îÄ API/
    ‚îú‚îÄ‚îÄ Controllers/          # HTTP endpoints
    ‚îî‚îÄ‚îÄ Middleware/           # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
```

---

## üì° API Endpoints

### üîì –ü—É–±–ª–∏—á–Ω—ã–µ (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞)

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/auth/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/auth/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞) |

### üîí –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω)

**–°—á–µ—Ç–∞:**
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/accounts` | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å—á—ë—Ç |
| GET | `/api/accounts` | –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—á–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/api/accounts/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å—á—ë—Ç–µ |

**–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:**
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/api/transactions/deposit` | üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á—ë—Ç –Ω–∞–ª–∏—á–Ω—ã–º–∏ |
| POST | `/api/transactions/withdraw` | üí∏ –°–Ω—è—Ç—å –Ω–∞–ª–∏—á–Ω—ã–µ (–ª–∏–º–∏—Ç 50,000/–¥–µ–Ω—å) |
| POST | `/api/transactions/payment` | üßæ –û–ø–ª–∞—Ç–∏—Ç—å —É—Å–ª—É–≥—É (–∫–æ–º–º—É–Ω–∞–ª–∫–∞, –∫—Ä–µ–¥–∏—Ç –∏ —Ç.–¥.) |
| POST | `/api/transactions/card-payment` | üõí –û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π –≤ –º–∞–≥–∞–∑–∏–Ω–µ |
| POST | `/api/transactions/transfer` | üí≥ –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ |
| GET | `/api/transactions/account/{id}` | üìã –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å—á—ë—Ç–∞ |
| GET | `/api/transactions/statement/{id}` | üìÑ –í—ã–ø–∏—Å–∫–∞ –ø–æ —Å—á—ë—Ç—É –∑–∞ –ø–µ—Ä–∏–æ–¥ |

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ß–µ—Ä–µ–∑ cURL (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

**Windows PowerShell:**
```powershell
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
$body = @{
    email = "test@example.com"
    password = "Test123!@#"
    fullName = "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤"
    phoneNumber = "+79991234567"
} | ConvertTo-Json

Invoke-RestMethod -Uri "https://localhost:7001/api/auth/register" `
    -Method Post `
    -ContentType "application/json" `
    -Body $body `
    -SkipCertificateCheck
```

**Linux/Mac:**
```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST https://localhost:7001/api/auth/register \
  -H "Content-Type: application/json" \
  -k \
  -d '{
    "email": "test@example.com",
    "password": "Test123!@#",
    "fullName": "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤",
    "phoneNumber": "+79991234567"
  }'

# –í—Ö–æ–¥
curl -X POST https://localhost:7001/api/auth/login \
  -H "Content-Type: application/json" \
  -k \
  -d '{
    "email": "test@example.com",
    "password": "Test123!@#"
  }'

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ TOKEN)
curl -X POST https://localhost:7001/api/accounts \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -k \
  -d '{
    "type": 1,
    "currency": "USD"
  }'
```

### –ß–µ—Ä–µ–∑ Postman

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é:**
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é "Bank API"
   - –î–æ–±–∞–≤—å—Ç–µ –±–∞–∑–æ–≤—ã–π URL: `https://localhost:7001`
   - –û—Ç–∫–ª—é—á–∏—Ç–µ SSL verification: Settings ‚Üí SSL Certificate Verification ‚Üí OFF

2. **–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:**
   - POST Register ‚Üí `/api/auth/register`
   - POST Login ‚Üí `/api/auth/login`
   - POST Create Account ‚Üí `/api/accounts` (–¥–æ–±–∞–≤—å—Ç–µ Bearer Token)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Authorization:**
   - –¢–∏–ø: Bearer Token
   - Token: —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –æ—Ç–≤–µ—Ç–∞ Login

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **JWT Authentication**
   - –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 24 —á–∞—Å–∞
   - –°–æ–¥–µ—Ä–∂–∏—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ email
   - –ü–æ–¥–ø–∏—Å–∞–Ω —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º

2. **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è BCrypt
   - –°–æ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü–∞—Ä–æ–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ

3. **Rate Limiting**
   - –ú–∞–∫—Å–∏–º—É–º 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞
   - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ User ID –∏–ª–∏ IP
   - –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏: HTTP 429 Too Many Requests

4. **Audit Logging**
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –ë–î
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è: User ID, IP, –¥–µ–π—Å—Ç–≤–∏–µ, –≤—Ä–µ–º—è
   - –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –∏ –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –í—Å–µ –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è middleware
   - –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ —Å–∫—Ä—ã—Ç—ã –≤ production

6. **–ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π**
   - Entity Framework –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - ORM –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü

**Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏):**
```sql
- Id (UUID)
- Email (unique)
- PasswordHash
- FullName
- PhoneNumber
- CreatedAt
- LastLoginAt
- IsActive
```

**Accounts (–°—á–µ—Ç–∞):**
```sql
- Id (UUID)
- UserId (FK ‚Üí Users)
- AccountNumber (unique)
- Balance (decimal)
- Currency (USD/EUR/RUB)
- Type (Checking/Savings/Investment)
- CreatedAt
- IsActive
```

**Transactions (–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏):**
```sql
- Id (UUID)
- FromAccountId (FK ‚Üí Accounts)
- ToAccountId (FK ‚Üí Accounts)
- Amount (decimal)
- Description
- Status (Pending/Completed/Failed)
- CreatedAt
- CompletedAt
```

**AuditLogs (–ê—É–¥–∏—Ç):**
```sql
- Id (UUID)
- UserId (FK ‚Üí Users, nullable)
- Action
- EntityType
- EntityId
- IpAddress
- UserAgent
- Timestamp
```

### –ü–æ–ª–µ–∑–Ω—ã–µ SQL –∫–æ–º–∞–Ω–¥—ã

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ
docker exec -it bank_postgres psql -U postgres -d bankdb

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
\dt

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT "Id", "Email", "FullName", "CreatedAt" FROM "Users";

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—á–µ—Ç–∞
SELECT "AccountNumber", "Balance", "Currency", "Type" FROM "Accounts";

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
SELECT * FROM "Transactions" ORDER BY "CreatedAt" DESC LIMIT 10;

-- –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á—ë—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
UPDATE "Accounts" 
SET "Balance" = 5000.00 
WHERE "AccountNumber" = '–í–ê–®_–ù–û–ú–ï–†_–°–ß–Å–¢–ê';

-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å audit –ª–æ–≥–∏
SELECT "Action", "IpAddress", "Timestamp" 
FROM "AuditLogs" 
ORDER BY "Timestamp" DESC 
LIMIT 20;
```

---

## üéØ –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

### –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞**
   - –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
   - `Balance >= Amount`

2. **–í–∞–ª—é—Ç—ã**
   - –°—á–µ—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç–µ
   - USD ‚Üí USD ‚úÖ
   - USD ‚Üí EUR ‚ùå

3. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å—á–µ—Ç–æ–≤**
   - –û–±–∞ —Å—á—ë—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã
   - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å—á–µ—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

4. **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**
   - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –ª–∏–±–æ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `BeginTransaction()`

### –°—á–µ—Ç–∞

1. **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞**
   - –§–æ—Ä–º–∞—Ç: `ACC{YYYYMMDD}{6-digits}`
   - –ü—Ä–∏–º–µ—Ä: `ACC20241220123456`

2. **–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å**
   - –ù–æ–≤—ã–π —Å—á—ë—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –±–∞–ª–∞–Ω—Å–æ–º 0
   - –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

3. **–í–∞–ª—é—Ç–∞**
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
   - –ò–∑–º–µ–Ω–∏—Ç—å –Ω–µ–ª—å–∑—è

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

1. **Email**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞

2. **–ü–∞—Ä–æ–ª—å**
   - –ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è: –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã

3. **–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –ü—Ä–∏–º–µ—Ä: `+79991234567`

---

## üê≥ Docker –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ PostgreSQL
docker-compose logs -f postgres

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Redis
docker-compose logs -f redis

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose stop

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
docker exec -it bank_postgres psql -U postgres -d bankdb

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
docker exec -it bank_redis redis-cli ping
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ Swagger

1. –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI: https://localhost:7001/swagger
2. –ù–∞–∂–º–∏—Ç–µ "Try it out" –Ω–∞ –Ω—É–∂–Ω–æ–º endpoint
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ
4. –ù–∞–∂–º–∏—Ç–µ "Execute"
5. –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

```bash
# 1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/auth/register
{
  "email": "test@example.com",
  "password": "Test123!@#",
  "fullName": "–¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤",
  "phoneNumber": "+79991234567"
}

# 2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è)
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ token –∏–∑ –æ—Ç–≤–µ—Ç–∞

# 3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Swagger
# –ö–Ω–æ–ø–∫–∞ "Authorize" ‚Üí Bearer TOKEN

# 4. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —Å—á—ë—Ç
POST /api/accounts
{
  "type": 1,
  "currency": "USD"
}

# 5. –°–æ–∑–¥–∞–π—Ç–µ –≤—Ç–æ—Ä–æ–π —Å—á—ë—Ç
POST /api/accounts
{
  "type": 2,
  "currency": "USD"
}

# 6. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —Å—á—ë—Ç (—á–µ—Ä–µ–∑ SQL)
docker exec -it bank_postgres psql -U postgres -d bankdb
UPDATE "Accounts" SET "Balance" = 1000.00 WHERE "AccountNumber" = 'ACC20241220123456';

# 7. –°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥
POST /api/transactions
{
  "fromAccountId": "ID_–ü–ï–†–í–û–ì–û_–°–ß–Å–¢–ê",
  "toAccountId": "ID_–í–¢–û–†–û–ì–û_–°–ß–Å–¢–ê",
  "amount": 250.00,
  "description": "–¢–µ—Å—Ç–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥"
}

# 8. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å—ã
GET /api/accounts

# 9. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
GET /api/transactions/account/{accountId}?page=1&pageSize=10
```

---

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç —É–∂–µ –∑–∞–Ω—è—Ç

**–°–∏–º–ø—Ç–æ–º:** `Error: listen EADDRINUSE: address already in use`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Windows
netstat -ano | findstr :5432
taskkill /PID <PID> /F

# Linux/Mac
lsof -i :5432
kill -9 <PID>
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps

# –†–µ—Å—Ç–∞—Ä—Ç—É–π—Ç–µ PostgreSQL
docker-compose restart postgres

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs postgres
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL Certificate Error

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–≤–µ—Ä—è—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
dotnet dev-certs https --trust

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ -k –≤ curl
curl -k https://localhost:7001/api/...
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–¥–∞–ª–∏—Ç–µ –ë–î –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–Ω–æ–≤–æ
dotnet ef database drop --force
dotnet ef database update

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç–µ –ø–∞–ø–∫—É Migrations –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞–Ω–æ–≤–æ
rm -rf Migrations/
dotnet ef migrations add InitialCreate
dotnet ef database update
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# PostgreSQL
docker exec bank_postgres pg_isready -U postgres

# Redis
docker exec bank_redis redis-cli ping

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
# –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ dotnet run
```

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í—Å–µ –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `dotnet run`:
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ë–î
- –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- –í—Ö–æ–¥—è—â–∏–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- –û—à–∏–±–∫–∏

---

## üöÄ –†–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - ‚úÖ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç–∞ –∏–∑–≤–Ω–µ
   - ‚úÖ –°–Ω—è—Ç–∏–µ –Ω–∞–ª–∏—á–Ω—ã—Ö
   - ‚úÖ –ü–µ—Ä–µ–≤–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
   - ‚úÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
   - ‚úÖ –®–∞–±–ª–æ–Ω—ã –ø–ª–∞—Ç–µ–∂–µ–π

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - ‚úÖ –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)
   - ‚úÖ Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - ‚úÖ SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
   - ‚úÖ –î–µ—Ç–µ–∫—Ç–æ—Ä –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞

3. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - ‚úÖ –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å Message Bus (RabbitMQ/Kafka)
   - ‚úÖ CQRS –ø–∞—Ç—Ç–µ—Ä–Ω
   - ‚úÖ Event Sourcing
   - ‚úÖ GraphQL API

4. **DevOps**
   - ‚úÖ Unit —Ç–µ—Å—Ç—ã
   - ‚úÖ Integration —Ç–µ—Å—Ç—ã
   - ‚úÖ CI/CD pipeline (GitHub Actions)
   - ‚úÖ Kubernetes –¥–µ–ø–ª–æ–π
   - ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [—Ä–∞–∑–¥–µ–ª "–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"](#Ô∏è-–≤–æ–∑–º–æ–∂–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã: `docker ps`

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.

---

**üéâ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π API!**

–ù–∞—á–Ω–∏—Ç–µ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Swagger UI –∏ –∏—Å—Å–ª–µ–¥—É–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.